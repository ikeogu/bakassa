{"remainingRequest":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/babel-loader/lib/index.js!/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/src/components/tutor/TutorContactModal.vue?vue&type=template&id=f31c39ac&scoped=true","dependencies":[{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/src/components/tutor/TutorContactModal.vue","mtime":1642679473350},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/cache-loader/dist/cjs.js","mtime":1642684430840},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/babel-loader/lib/index.js","mtime":1642684434751},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1642684409984},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/cache-loader/dist/cjs.js","mtime":1642684430840},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/vue-loader-v16/dist/index.js","mtime":1642684409856}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgbm9ybWFsaXplQ2xhc3MgYXMgX25vcm1hbGl6ZUNsYXNzLCB2TW9kZWxUZXh0IGFzIF92TW9kZWxUZXh0LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtZjMxYzM5YWMiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAidHV0b3JfY29udGFjdF9tb2RlbCIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgaWQ6ICJjb250YWN0TW9kYWxGcmFtZSIKfTsKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJjb250YWN0X21vZGFsIgp9Owp2YXIgX2hvaXN0ZWRfNCA9IHsKICBjbGFzczogImNvbnRhY3RfaGVhZCIKfTsKdmFyIF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJ0dXRvcl9pbmZvIgp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogImltYWdlIgp9Owp2YXIgX2hvaXN0ZWRfNyA9IFsic3JjIl07CnZhciBfaG9pc3RlZF84ID0gewogIGNsYXNzOiAibmFtZSIKfTsKdmFyIF9ob2lzdGVkXzkgPSB7CiAgY2xhc3M6ICJtZXNzYWdlc19saXN0X2ZyYW1lIgp9Owp2YXIgX2hvaXN0ZWRfMTAgPSB7CiAgY2xhc3M6ICJtZXNzYWdlc19saXN0IiwKICByZWY6ICJtZXNzYWdlTGlzdCIKfTsKdmFyIF9ob2lzdGVkXzExID0gewogIGNsYXNzOiAibWVzc2FnZV9ib3hfZnJhbWUiCn07CnZhciBfaG9pc3RlZF8xMiA9IHsKICBjbGFzczogIm1lc3NhZ2VfYm94Igp9OwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfQnV0dG9uUGxhaW5UZXh0ID0gX3Jlc29sdmVDb21wb25lbnQoIkJ1dHRvblBsYWluVGV4dCIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF80LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzYsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJpbWciLCB7CiAgICBzcmM6IF9jdHgudHV0b3JpbWFnZQogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgX2hvaXN0ZWRfNyldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfOCwgX3RvRGlzcGxheVN0cmluZyhfY3R4LnR1dG9ybmFtZSksIDEKICAvKiBURVhUICovCiAgKV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzksIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xMCwgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoX2N0eC5hbGxNZXNzYWdlcywgZnVuY3Rpb24gKG1lc3NhZ2UsIGluZGV4KSB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCB7CiAgICAgIGtleTogaW5kZXgsCiAgICAgIGNsYXNzOiAibWVzc2FnZV93cmFwcGVyIgogICAgfSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAgICAgY2xhc3M6IF9ub3JtYWxpemVDbGFzcyhbIm1lc3NhZ2UiLCB7CiAgICAgICAgbWU6IG1lc3NhZ2Uuc2VuZGVyID09PSBfY3R4LnVzZXIuX2lkCiAgICAgIH1dKQogICAgfSwgX3RvRGlzcGxheVN0cmluZyhtZXNzYWdlLmNvbnRlbnQpLCAzCiAgICAvKiBURVhULCBDTEFTUyAqLwogICAgKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgICBjbGFzczogX25vcm1hbGl6ZUNsYXNzKFsic3RhdHVzIiwgewogICAgICAgIG1lOiBtZXNzYWdlLnNlbmRlciA9PT0gX2N0eC51c2VyLl9pZAogICAgICB9XSkKICAgIH0sIF90b0Rpc3BsYXlTdHJpbmcobWVzc2FnZS5zdGF0dXMpLCAzCiAgICAvKiBURVhULCBDTEFTUyAqLwogICAgKV0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpXSwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xMiwgW193aXRoRGlyZWN0aXZlcyhfY3JlYXRlRWxlbWVudFZOb2RlKCJ0ZXh0YXJlYSIsIHsKICAgIHBsYWNlaG9sZGVyOiAiVHlwZSBzb21ldGhpbmcgaGVyZS4uLiIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gX2N0eC5uZXdtZXNzYWdlID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgX2N0eC5uZXdtZXNzYWdlXV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogX25vcm1hbGl6ZUNsYXNzKFsic2VuZF9idG5fd3JhcHBlciIsIHsKICAgICAgZGlzYWJsZWQ6IF9jdHgubmV3bWVzc2FnZSA9PSAnJyA/IHRydWUgOiBmYWxzZQogICAgfV0pCiAgfSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0J1dHRvblBsYWluVGV4dCwgewogICAgYnV0dG9uVGV4dDogIlNFTkQiLAogICAgb25CdXR0b25BY3Rpb246IF9jdHguc2VuZE1lc3NhZ2UKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25CdXR0b25BY3Rpb24iXSldLCAyCiAgLyogQ0xBU1MgKi8KICApXSldKV0pXSldKTsKfQ=="},{"version":3,"sources":["/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/src/components/tutor/TutorContactModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"tutor_contact_model\">\n        <div id=\"contactModalFrame\">\n            <div class=\"contact_modal\">\n                <div class=\"contact_head\">\n\n                    <div class=\"tutor_info\">\n                        <div class=\"image\">\n                            <img :src=\"tutorimage\" >\n                        </div>\n                        <div class=\"name\"> {{ tutorname }} </div>\n                    </div>\n\n                </div>\n\n                <div class=\"messages_list_frame\">\n                    <div class=\"messages_list\" ref=\"messageList\">\n                        <div\n                            v-for=\"(message, index) in allMessages\"\n                            :key=\"index\"\n                            class=\"message_wrapper\"\n                        >\n                            \n                            <div \n                                class=\"message\"\n                                :class=\"{ me: (message.sender === user._id) }\"\n                            >\n                                {{ message.content }}\n                            </div>\n                            <div \n                                class=\"status\"\n                                :class=\"{ me: (message.sender === user._id) }\"\n                            >\n                                {{ message.status }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"message_box_frame\">\n                    <div class=\"message_box\">\n                        <textarea placeholder=\"Type something here...\" v-model=\"newmessage\"></textarea>\n                        <div    \n                            class=\"send_btn_wrapper\"\n                            :class=\"{\n                                disabled: (newmessage == '') ?true :false\n                            }\"\n                        >\n                            <ButtonPlainText \n                                buttonText=\"SEND\"\n                                @buttonAction=\"sendMessage\"\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n</template>\n\n<script>\nimport { defineComponent } from \"@vue/runtime-core\";\nimport ButtonPlainText from \"@/components/buttons/ButtonPlainText.vue\";\n\nexport default defineComponent({\n    name:\"tutor-contact-model\",\n    components: { ButtonPlainText },\n    props: ['tutorimage', 'tutorname', 'tutoruserId'],\n    data() {\n        return { \n            hide: true,\n            user: this.$store.getters.userData,\n            allMessages: [],\n            newmessage: ''\n        }\n    },\n    methods: {\n        closeModal() {\n            this.hide = false;\n        },\n        sendMessage() {\n            if(this.newmessage != '') {\n                if(this.$store.getters.userData != '') {\n                    var newMessageObj = {\n                        recipient: this.tutoruserId,\n                        content: this.newmessage,\n                        status: 'sending..',\n                        datetime: new Date().toString()\n                    };\n\n                    this.allMessages.push(newMessageObj);\n\n                    this.$store.dispatch('sendmessage', newMessageObj)\n                    .then((updatedMessages)=> {\n                        console.log(updatedMessages);\n                        this.allMessages = updatedMessages;\n                    })\n                    .catch((error)=> {\n                        this.allMessages = this.allMessages.filter(element => element.message.status !== 'sending' );\n                        console.log(error.response);\n                    });\n                }\n                else this.fetchUser();\n            }\n        },\n        fetchUser() {\n            this.$store.dispatch('fetchuserdata')\n            .then((response)=> {\n                this.sendMessage();\n            })\n            .catch((error)=> {\n                this.$router.push('/logout')\n            });\n        },\n        fetchMessage() {\n            this.$store.dispatch('fetchmessages', this.tutoruserId)\n            .then((response)=> {\n                this.allMessages = response;\n            })\n            .catch((error)=> {\n                console.log(error.response);\n            })\n        },\n        scrollToElement() {\n            const parentElement = this.$el.querySelector('.messages_list_frame');\n            const element = this.$el.querySelector('.messages_list');\n\n            if(element) {\n                parentElement.scrollTop = element.scrollHeight;\n            }\n        }\n    },\n    beforeMount() {\n        this.fetchMessage();\n    },\n    mounted() {\n        this.scrollToElement();\n    },\n    updated() {\n        this.$nextTick(()=> this.scrollToElement());\n        if(this.$store.getters.userData == '') this.fetchUser();\n    }\n});\n</script>\n\n<style scoped>\n    div.tutor_contact_model {\n        display: flex;\n    }\n    div#contactModalFrame {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 30%;\n        top: 0px;\n        left: 35%;\n        height: 100vh;\n        position: fixed;\n        z-index: 1000;\n    }\n    .contact_modal {\n        width: 100%;\n        height: 80vh;\n        background: white;\n        border-radius: 5px;\n    }\n\n    .contact_head {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: calc(10% - 1px);\n        border-bottom: 1px solid var(--paper-grey-300);\n        font-weight: 400;\n        padding: 0 5%;\n    }\n    .contact_head .tutor_info {\n        display: flex;\n        align-items: center;\n    }\n    .contact_head .tutor_info .image {\n        width: 45px;\n        height: 45px;\n        border-radius: 50%;\n        overflow: hidden; \n    }\n    .contact_head .tutor_info .name {\n        margin-left: 10px;\n        font-size: 130%;\n        text-transform: capitalize;\n        font-weight: 600;\n    }\n\n    .messages_list_frame {\n        height: 80%;\n        overflow-y: auto;\n    }\n    .messages_list {\n        padding: 5% 0;\n        width: 95%;\n        margin: 0 auto;\n    }\n    .me {\n        margin-left: auto;\n    }\n    .message {\n        background: #c44444;\n        color: white;\n        width: max-content;\n        max-width: 50%;\n        padding: 8px;\n        border-radius: 10px;\n        margin-top: 5px;\n    }\n    .status {\n        font-size: 80%;\n        width: max-content;\n    }\n\n\n    .message_box_frame {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: calc(10% - 1px);\n        border-top: 1px solid var(--paper-grey-300);\n        font-weight: 400;\n        padding: 0 5%;\n    }\n    .message_box {\n        height: 80%;\n        width: 100%;\n        display: flex;\n        align-items: center;\n    }\n    textarea {\n        border: none;\n        outline: none;\n        resize: none;\n        height: 90%;\n        width: 80%;\n        background: none;\n        font-size: 110%;\n    }\n    textarea::-webkit-scrollbar {\n        width: 10px;\n        background: none;\n    }\n    textarea::-webkit-scrollbar-thumb {\n        background: var(--paper-grey-300);\n        border-radius: 5px;\n        cursor: pointer !important;\n    }\n    div.send_btn_wrapper {\n        margin-left: 5px;\n        width: calc(20% - 5px);\n        height: 70%;\n    }\n    div.send_btn_wrapper button {\n        border-radius: 5px;\n        background: var(--burgundy-600);\n        border: none;\n        color: white;\n        font-weight: 700;\n        cursor: pointer;\n    }\n    div.send_btn_wrapper.disabled {\n        opacity: 0.5;\n    }\n</style>"],"sourceRoot":""}]}