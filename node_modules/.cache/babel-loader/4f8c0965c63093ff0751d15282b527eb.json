{"remainingRequest":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/babel-loader/lib/index.js!/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/src/components/tutor/TutorContactModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/src/components/tutor/TutorContactModal.vue","mtime":1642679473350},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/cache-loader/dist/cjs.js","mtime":1642684430840},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/babel-loader/lib/index.js","mtime":1642684434751},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/cache-loader/dist/cjs.js","mtime":1642684430840},{"path":"/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/node_modules/vue-loader-v16/dist/index.js","mtime":1642684409856}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgfSBmcm9tICJAdnVlL3J1bnRpbWUtY29yZSI7CmltcG9ydCBCdXR0b25QbGFpblRleHQgZnJvbSAiQC9jb21wb25lbnRzL2J1dHRvbnMvQnV0dG9uUGxhaW5UZXh0LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogInR1dG9yLWNvbnRhY3QtbW9kZWwiLAogIGNvbXBvbmVudHM6IHsKICAgIEJ1dHRvblBsYWluVGV4dDogQnV0dG9uUGxhaW5UZXh0CiAgfSwKICBwcm9wczogWyd0dXRvcmltYWdlJywgJ3R1dG9ybmFtZScsICd0dXRvcnVzZXJJZCddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoaWRlOiB0cnVlLAogICAgICB1c2VyOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXJEYXRhLAogICAgICBhbGxNZXNzYWdlczogW10sCiAgICAgIG5ld21lc3NhZ2U6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2xvc2VNb2RhbDogZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHsKICAgICAgdGhpcy5oaWRlID0gZmFsc2U7CiAgICB9LAogICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubmV3bWVzc2FnZSAhPSAnJykgewogICAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXJEYXRhICE9ICcnKSB7CiAgICAgICAgICB2YXIgbmV3TWVzc2FnZU9iaiA9IHsKICAgICAgICAgICAgcmVjaXBpZW50OiB0aGlzLnR1dG9ydXNlcklkLAogICAgICAgICAgICBjb250ZW50OiB0aGlzLm5ld21lc3NhZ2UsCiAgICAgICAgICAgIHN0YXR1czogJ3NlbmRpbmcuLicsCiAgICAgICAgICAgIGRhdGV0aW1lOiBuZXcgRGF0ZSgpLnRvU3RyaW5nKCkKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmFsbE1lc3NhZ2VzLnB1c2gobmV3TWVzc2FnZU9iaik7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VuZG1lc3NhZ2UnLCBuZXdNZXNzYWdlT2JqKS50aGVuKGZ1bmN0aW9uICh1cGRhdGVkTWVzc2FnZXMpIHsKICAgICAgICAgICAgY29uc29sZS5sb2codXBkYXRlZE1lc3NhZ2VzKTsKICAgICAgICAgICAgX3RoaXMuYWxsTWVzc2FnZXMgPSB1cGRhdGVkTWVzc2FnZXM7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMuYWxsTWVzc2FnZXMgPSBfdGhpcy5hbGxNZXNzYWdlcy5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5tZXNzYWdlLnN0YXR1cyAhPT0gJ3NlbmRpbmcnOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHRoaXMuZmV0Y2hVc2VyKCk7CiAgICAgIH0KICAgIH0sCiAgICBmZXRjaFVzZXI6IGZ1bmN0aW9uIGZldGNoVXNlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZmV0Y2h1c2VyZGF0YScpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnNlbmRNZXNzYWdlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy9sb2dvdXQnKTsKICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hNZXNzYWdlOiBmdW5jdGlvbiBmZXRjaE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2ZldGNobWVzc2FnZXMnLCB0aGlzLnR1dG9ydXNlcklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5hbGxNZXNzYWdlcyA9IHJlc3BvbnNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNjcm9sbFRvRWxlbWVudDogZnVuY3Rpb24gc2Nyb2xsVG9FbGVtZW50KCkgewogICAgICB2YXIgcGFyZW50RWxlbWVudCA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlc19saXN0X2ZyYW1lJyk7CiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VzX2xpc3QnKTsKCiAgICAgIGlmIChlbGVtZW50KSB7CiAgICAgICAgcGFyZW50RWxlbWVudC5zY3JvbGxUb3AgPSBlbGVtZW50LnNjcm9sbEhlaWdodDsKICAgICAgfQogICAgfQogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5mZXRjaE1lc3NhZ2UoKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNjcm9sbFRvRWxlbWVudCgpOwogIH0sCiAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCgpIHsKICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzNC5zY3JvbGxUb0VsZW1lbnQoKTsKICAgIH0pOwogICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckRhdGEgPT0gJycpIHRoaXMuZmV0Y2hVc2VyKCk7CiAgfQp9KTs="},{"version":3,"sources":["/home/chiboy/lampstack-8.0.5-0/apache2/htdocs/bukassa-web/src/components/tutor/TutorContactModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"tutor_contact_model\">\n        <div id=\"contactModalFrame\">\n            <div class=\"contact_modal\">\n                <div class=\"contact_head\">\n\n                    <div class=\"tutor_info\">\n                        <div class=\"image\">\n                            <img :src=\"tutorimage\" >\n                        </div>\n                        <div class=\"name\"> {{ tutorname }} </div>\n                    </div>\n\n                </div>\n\n                <div class=\"messages_list_frame\">\n                    <div class=\"messages_list\" ref=\"messageList\">\n                        <div\n                            v-for=\"(message, index) in allMessages\"\n                            :key=\"index\"\n                            class=\"message_wrapper\"\n                        >\n                            \n                            <div \n                                class=\"message\"\n                                :class=\"{ me: (message.sender === user._id) }\"\n                            >\n                                {{ message.content }}\n                            </div>\n                            <div \n                                class=\"status\"\n                                :class=\"{ me: (message.sender === user._id) }\"\n                            >\n                                {{ message.status }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"message_box_frame\">\n                    <div class=\"message_box\">\n                        <textarea placeholder=\"Type something here...\" v-model=\"newmessage\"></textarea>\n                        <div    \n                            class=\"send_btn_wrapper\"\n                            :class=\"{\n                                disabled: (newmessage == '') ?true :false\n                            }\"\n                        >\n                            <ButtonPlainText \n                                buttonText=\"SEND\"\n                                @buttonAction=\"sendMessage\"\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n</template>\n\n<script>\nimport { defineComponent } from \"@vue/runtime-core\";\nimport ButtonPlainText from \"@/components/buttons/ButtonPlainText.vue\";\n\nexport default defineComponent({\n    name:\"tutor-contact-model\",\n    components: { ButtonPlainText },\n    props: ['tutorimage', 'tutorname', 'tutoruserId'],\n    data() {\n        return { \n            hide: true,\n            user: this.$store.getters.userData,\n            allMessages: [],\n            newmessage: ''\n        }\n    },\n    methods: {\n        closeModal() {\n            this.hide = false;\n        },\n        sendMessage() {\n            if(this.newmessage != '') {\n                if(this.$store.getters.userData != '') {\n                    var newMessageObj = {\n                        recipient: this.tutoruserId,\n                        content: this.newmessage,\n                        status: 'sending..',\n                        datetime: new Date().toString()\n                    };\n\n                    this.allMessages.push(newMessageObj);\n\n                    this.$store.dispatch('sendmessage', newMessageObj)\n                    .then((updatedMessages)=> {\n                        console.log(updatedMessages);\n                        this.allMessages = updatedMessages;\n                    })\n                    .catch((error)=> {\n                        this.allMessages = this.allMessages.filter(element => element.message.status !== 'sending' );\n                        console.log(error.response);\n                    });\n                }\n                else this.fetchUser();\n            }\n        },\n        fetchUser() {\n            this.$store.dispatch('fetchuserdata')\n            .then((response)=> {\n                this.sendMessage();\n            })\n            .catch((error)=> {\n                this.$router.push('/logout')\n            });\n        },\n        fetchMessage() {\n            this.$store.dispatch('fetchmessages', this.tutoruserId)\n            .then((response)=> {\n                this.allMessages = response;\n            })\n            .catch((error)=> {\n                console.log(error.response);\n            })\n        },\n        scrollToElement() {\n            const parentElement = this.$el.querySelector('.messages_list_frame');\n            const element = this.$el.querySelector('.messages_list');\n\n            if(element) {\n                parentElement.scrollTop = element.scrollHeight;\n            }\n        }\n    },\n    beforeMount() {\n        this.fetchMessage();\n    },\n    mounted() {\n        this.scrollToElement();\n    },\n    updated() {\n        this.$nextTick(()=> this.scrollToElement());\n        if(this.$store.getters.userData == '') this.fetchUser();\n    }\n});\n</script>\n\n<style scoped>\n    div.tutor_contact_model {\n        display: flex;\n    }\n    div#contactModalFrame {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 30%;\n        top: 0px;\n        left: 35%;\n        height: 100vh;\n        position: fixed;\n        z-index: 1000;\n    }\n    .contact_modal {\n        width: 100%;\n        height: 80vh;\n        background: white;\n        border-radius: 5px;\n    }\n\n    .contact_head {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: calc(10% - 1px);\n        border-bottom: 1px solid var(--paper-grey-300);\n        font-weight: 400;\n        padding: 0 5%;\n    }\n    .contact_head .tutor_info {\n        display: flex;\n        align-items: center;\n    }\n    .contact_head .tutor_info .image {\n        width: 45px;\n        height: 45px;\n        border-radius: 50%;\n        overflow: hidden; \n    }\n    .contact_head .tutor_info .name {\n        margin-left: 10px;\n        font-size: 130%;\n        text-transform: capitalize;\n        font-weight: 600;\n    }\n\n    .messages_list_frame {\n        height: 80%;\n        overflow-y: auto;\n    }\n    .messages_list {\n        padding: 5% 0;\n        width: 95%;\n        margin: 0 auto;\n    }\n    .me {\n        margin-left: auto;\n    }\n    .message {\n        background: #c44444;\n        color: white;\n        width: max-content;\n        max-width: 50%;\n        padding: 8px;\n        border-radius: 10px;\n        margin-top: 5px;\n    }\n    .status {\n        font-size: 80%;\n        width: max-content;\n    }\n\n\n    .message_box_frame {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: calc(10% - 1px);\n        border-top: 1px solid var(--paper-grey-300);\n        font-weight: 400;\n        padding: 0 5%;\n    }\n    .message_box {\n        height: 80%;\n        width: 100%;\n        display: flex;\n        align-items: center;\n    }\n    textarea {\n        border: none;\n        outline: none;\n        resize: none;\n        height: 90%;\n        width: 80%;\n        background: none;\n        font-size: 110%;\n    }\n    textarea::-webkit-scrollbar {\n        width: 10px;\n        background: none;\n    }\n    textarea::-webkit-scrollbar-thumb {\n        background: var(--paper-grey-300);\n        border-radius: 5px;\n        cursor: pointer !important;\n    }\n    div.send_btn_wrapper {\n        margin-left: 5px;\n        width: calc(20% - 5px);\n        height: 70%;\n    }\n    div.send_btn_wrapper button {\n        border-radius: 5px;\n        background: var(--burgundy-600);\n        border: none;\n        color: white;\n        font-weight: 700;\n        cursor: pointer;\n    }\n    div.send_btn_wrapper.disabled {\n        opacity: 0.5;\n    }\n</style>"],"sourceRoot":""}]}