var VideoSDKMeeting=function(){function e(){}return e.prototype.init=function(e){var n=void 0===e?{}:e,o=n.micEnabled,t=n.webcamEnabled,a=n.name,r=n.meetingId,i=n.redirectOnLeave,d=n.chatEnabled,l=n.screenShareEnabled,p=n.pollEnabled,c=n.whiteboardEnabled,s=n.participantCanToggleSelfWebcam,m=n.participantCanToggleSelfMic,u=n.raiseHandEnabled,b=n.containerId,f=n.recordingEnabled,g=n.recordingWebhookUrl,C=n.autoStartRecording,R=n.participantCanToggleRecording,U=n.brandingEnabled,I=n.brandLogoURL,h=n.brandName,y=n.apiKey,v=n.participantCanLeave,E=n.poweredBy,w=n.livestream,S=n.joinScreen,T=n.permissions,j=n.notificationSoundEnabled,O=n.pin;try{w||(w={}),T||(T={}),S||(S={});var k=T,L=k.askToJoin,M=k.toggleParticipantWebcam,W=k.toggleParticipantMic,P=k.removeParticipant,K=k.endMeeting,N=k.drawOnWhiteboard,D=k.toggleWhiteboard,x=k.toggleRecording;L&&(M=!1,W=!1);var J=w,B=J.visible,V=J.autoStart,H=J.outputs,_=S,z=_.visible,G=_.meetingUrl,q=_.title,A=(null==O?void 0:O.allowed)||!1,F=(null==O?void 0:O.layout)||"GRID";if(!y)throw new Error("'apiKey' not provided!");var Q=[];L?Q.push("ask_join"):Q.push("allow_join");var X={apiKey:y};return Q.length&&(X.permissions=Q),Promise.resolve(fetch("https://api.zujonow.com/v1/prebuilt/token",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(X)})).then(function(e){return Promise.resolve(e.json()).then(function(e){var n=e.token,y=parent.document,w=parent.window;if(void 0===w||void 0===y)throw new Error("No browser detected!");var S=y.createElement("iframe");S.id="videosdk-frame";var T="https://embed.videosdk.live/rtc-js-prebuilt/0.1.18/?micEnabled="+encodeURIComponent(o?"true":"false")+"&webcamEnabled="+encodeURIComponent(t?"true":"false")+"&name="+encodeURIComponent(a)+"&meetingId="+encodeURIComponent(r)+"&redirectOnLeave="+encodeURIComponent(i)+"&chatEnabled="+encodeURIComponent(d?"true":"false")+"&screenShareEnabled="+encodeURIComponent(l?"true":"false")+"&pollEnabled="+encodeURIComponent(p?"true":"false")+"&whiteboardEnabled="+encodeURIComponent(c?"true":"false")+"&participantCanToggleSelfWebcam="+encodeURIComponent(s?"true":"false")+"&participantCanToggleSelfMic="+encodeURIComponent(m?"true":"false")+"&raiseHandEnabled="+encodeURIComponent(u?"true":"false")+"&token="+encodeURIComponent(n)+"&recordingEnabled="+encodeURIComponent(f?"true":"false")+"&recordingWebhookUrl="+encodeURIComponent(g||"")+"&autoStartRecording="+encodeURIComponent(C?"true":"false")+"&participantCanToggleRecording="+encodeURIComponent("boolean"==typeof x?x?"true":"false":"boolean"==typeof R&&R)+"&brandingEnabled="+encodeURIComponent(U?"true":"false")+"&brandLogoURL="+encodeURIComponent(I||"")+"&brandName="+encodeURIComponent(h)+"&participantCanLeave="+encodeURIComponent("boolean"==typeof v?v?"true":"false":"true")+"&poweredBy="+encodeURIComponent("boolean"==typeof E?E?"true":"false":"true")+"&liveStreamEnabled="+encodeURIComponent(B?"true":"false")+"&autoStartLiveStream="+encodeURIComponent(V?"true":"false")+"&liveStreamOutputs="+encodeURIComponent(JSON.stringify(H||[]))+"&participantCanToggleOtherMic="+encodeURIComponent(W?"true":"false")+"&participantCanToggleOtherWebcam="+encodeURIComponent(M?"true":"false")+"&askJoin="+encodeURIComponent(L?"true":"false")+"&joinScreenEnabled="+encodeURIComponent(z?"true":"false")+"&joinScreenMeetingUrl="+encodeURIComponent(G||"")+"&joinScreenTitle="+encodeURIComponent(q||"")+"&notificationSoundEnabled="+encodeURIComponent("boolean"==typeof j?j?"true":"false":"true")+"&canPin="+encodeURIComponent(A?"true":"false")+"&layout="+encodeURIComponent(F)+"&canEndMeeting="+encodeURIComponent("boolean"==typeof K&&K?"true":"false")+"&canDrawOnWhiteboard="+encodeURIComponent("boolean"==typeof N?N?"true":"false":"true")+"&canToggleWhiteboard="+encodeURIComponent("boolean"==typeof D?D?"true":"false":"true")+"&canRemoveOtherParticipant="+encodeURIComponent("boolean"==typeof P&&P?"true":"false");S.src=T,S.allowfullscreen=!0,S.width="100%",S.height="100%",S.allow="camera *; microphone *; fullscreen; display-capture; allow-same-origin; allow-presentation; encrypted-media; midi; encrypted-media ",S.style.border=0,S.allowusermedia="allowusermedia";var O=null;if(b){var k=y.getElementById(b);if(!k)throw new Error("No Container found with id "+b);O=k,k.appendChild(S)}else{var J=y.createElement("div");J.style.position="fixed",J.style.left=0,J.style.right=0,J.style.bottom=0,J.style.top=0,O=J,J.appendChild(S),y.body.style.margin="0px",y.body.style.padding="0px",y.body.style.height="100%",y.body.style.overflow="hidden",y.body.appendChild(J)}w.addEventListener("popstate",function(e){O.remove()})})})}catch(e){return Promise.reject(e)}},e}();exports.VideoSDKMeeting=VideoSDKMeeting;